<!DOCTYPE html><html lang="en"><head>
  <meta charset="UTF-8">
  <title>ZEWEIL Chat</title>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #0d0d0d;
      color: white;
    }
    #chat {
      height: 90vh;
      overflow-y: scroll;
      padding: 10px;
      background: #1a1a1a;
    }
    .message {
      margin-bottom: 10px;
    }
    .message span {
      font-weight: bold;
    }
    #inputArea {
      display: flex;
      padding: 10px;
      background: #111;
      border-top: 1px solid #333;
    }
    #inputArea input[type="text"] {
      flex: 1;
      padding: 8px;
      border: none;
      border-radius: 5px;
    }
    #inputArea button {
      margin-left: 10px;
      padding: 8px 12px;
      border: none;
      background: #0f0;
      color: black;
      border-radius: 5px;
      cursor: pointer;
    }
    img, video {
      max-width: 100%;
      border-radius: 10px;
    }
  </style>
</head><body>
  <div id="chat"></div>
  <div id="inputArea">
    <input type="text" id="messageInput" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ...">
    <input type="file" id="fileInput" style="display:none;" onchange="uploadFile()">
    <button onclick="document.getElementById('fileInput').click()">ğŸ“ Ù…Ù„Ù</button>
    <button onclick="sendMessage()">Ø¥Ø±Ø³Ø§Ù„</button>
  </div>  <script>
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_AUTH_DOMAIN",
      databaseURL: "YOUR_DATABASE_URL",
      projectId: "YOUR_PROJECT_ID",
      storageBucket: "YOUR_STORAGE_BUCKET",
      messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
      appId: "YOUR_APP_ID"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    let currentRoom = prompt("Ø§Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„ØºØ±ÙØ©:");
    let currentUser = prompt("Ø§Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ:");

    const chat = document.getElementById("chat");

    db.ref("rooms/" + currentRoom).push({
      name: "Ø§Ù„Ù†Ø¸Ø§Ù…",
      message: `Ù„Ù‚Ø¯ Ø§Ù†Ø¶Ù… ${currentUser}`,
      time: new Date().toLocaleTimeString(),
      reactions: {}
    });

    db.ref("rooms/" + currentRoom).on("child_added", function (snapshot) {
      const data = snapshot.val();
      const div = document.createElement("div");
      div.classList.add("message");
      div.innerHTML = `<span>${data.name}:</span> ${data.message} <small style="color:gray;">${data.time}</small>`;
      chat.appendChild(div);
      chat.scrollTop = chat.scrollHeight;
    });

    function sendMessage() {
      const input = document.getElementById("messageInput");
      const message = input.value.trim();
      if (message !== '') {
        db.ref("rooms/" + currentRoom).push({
          name: currentUser,
          message: message,
          time: new Date().toLocaleTimeString(),
          reactions: {}
        });
        input.value = '';
      }
    }

    function uploadFile() {
      const file = document.getElementById("fileInput").files[0];
      if (!file || !currentRoom || !currentUser) return;

      const reader = new FileReader();
      reader.onload = function (e) {
        let fileType = file.type;
        let content;

        if (fileType.startsWith("image/")) {
          content = `<img src="${e.target.result}">`;
        } else if (fileType.startsWith("video/")) {
          content = `<video controls><source src="${e.target.result}" type="${fileType}"></video>`;
        } else {
          content = `<a href="${e.target.result}" download="${file.name}" style="color: #0f0;">ğŸ“„ ØªØ­Ù…ÙŠÙ„ ${file.name}</a>`;
        }

        db.ref("rooms/" + currentRoom).push({
          name: currentUser,
          message: content,
          time: new Date().toLocaleTimeString(),
          reactions: {}
        });
      };
      reader.readAsDataURL(file);
    }
  </script></body></html>
